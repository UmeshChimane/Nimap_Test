<%- include('../nav') %>

<div class="container mt-4">
  <h2 class="mb-4">Product List</h2>
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Product ID</th>
        <th>Product Name</th>
        <th>Category ID</th>
        <th>Category Name</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% products.forEach(product => { %>
        <tr>
          <td><%= product.productId %></td>
          <td><%= product.productName %></td>
          <td><%= product.categoryId %></td>
          <td><%= product.categoryName %></td>
           <td>
            <a href="/editproduct/<%= product.productId %>" class="btn btn-sm btn-warning me-2">Edit</a>
            <a href="/deleteproduct/<%= product.productId %>" class="btn btn-sm btn-danger"
               onclick="return confirm('Are you sure you want to delete this product?');">Delete</a>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <nav>
    <ul class="pagination">
      <% for(let i=1; i <= totalPages; i++) { %>
        <li class="page-item <%= i === currentPage ? 'active' : '' %>">
          <a class="page-link" href="/viewproducts?page=<%= i %>"><%= i %></a>
        </li>
      <% } %>
    </ul>
  </nav>
</div>
